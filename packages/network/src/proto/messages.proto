syntax = "proto3";
package topology.network;

// Supposed to be the RIBLT stuff
message Vertex {
	message Operation {
 		string type = 1;
   		string value = 2;
    }
    string hash = 1;
    string nodeId = 2;
    Operation operation = 3;
    repeated string dependencies = 4;
};

message Message {
    enum MessageType {
        UPDATE = 0;
        SYNC = 1;
        SYNC_ACCEPT = 2;
        SYNC_REJECT = 3;
        CUSTOM = 4;
    }

    string sender = 1;
    MessageType type = 2;
    bytes data = 3;
}

message Update {
}

message Sync {
	repeated string vertex_hashes = 1;
}

message SyncAccept {
	// not strings
	repeated Vertex diff = 1;
	repeated string missing = 2;
}

message SyncReject { }
